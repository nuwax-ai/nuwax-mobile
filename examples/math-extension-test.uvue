<template>
	<view class="math-extension-test">
		<!-- é¡µé¢æ ‡é¢˜ -->
		<view class="page-header">
			<text class="page-title">Marked-KaTeX æ•°å­¦å…¬å¼æ‰©å±•æµ‹è¯•</text>
			<text class="page-subtitle">æµ‹è¯• uni-ai-x çš„ marked-katex-extension æ‰©å±•åŠŸèƒ½</text>
		</view>

		<!-- æµ‹è¯•æ§åˆ¶é¢æ¿ -->
		<view class="control-panel">
			<view class="control-section">
				<text class="control-title">æµ‹è¯•æ“ä½œï¼š</text>
				<view class="button-group">
					<button class="test-button" @click="runAllTests">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
					<button class="test-button" @click="testRegexOnly">ä»…æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼</button>
					<button class="test-button" @click="clearResults">æ¸…ç©ºç»“æœ</button>
				</view>
			</view>

			<view class="control-section">
				<text class="control-title">æµ‹è¯•è®¾ç½®ï¼š</text>
				<view class="setting-group">
					<view class="setting-item">
						<text class="setting-label">æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼š</text>
						<switch :checked="showDetails" @change="onShowDetailsChange" />
					</view>
					<view class="setting-item">
						<text class="setting-label">è‡ªåŠ¨è¿è¡Œï¼š</text>
						<switch :checked="autoRun" @change="onAutoRunChange" />
					</view>
				</view>
			</view>
		</view>

		<!-- æµ‹è¯•ç»“æœ -->
		<view class="test-results">
			<text class="section-title">æµ‹è¯•ç»“æœï¼š</text>
			
		<!-- æ‰©å±•ä¿¡æ¯ -->
		<view class="extension-info">
			<text class="info-title">æ‰©å±•ä¿¡æ¯ï¼š</text>
			<view class="info-content">
				<view class="info-item">
					<text class="info-label">æ‰©å±•æ•°é‡ï¼š</text>
					<text class="info-value">{{ extensionCount }}</text>
				</view>
				<view class="info-item">
					<text class="info-label">æ‰©å±•åç§°ï¼š</text>
					<text class="info-value">{{ extensionNames.join(', ') }}</text>
				</view>
			</view>
		</view>

		<!-- æ•°å­¦å…¬å¼æ¸²æŸ“æ¼”ç¤º -->
		<view class="math-renderer-demo">
			<text class="info-title">æ•°å­¦å…¬å¼æ¸²æŸ“æ¼”ç¤ºï¼š</text>
			<view class="demo-content">
				<view class="demo-section">
					<text class="demo-section-title">è¡Œå†…å…¬å¼ç¤ºä¾‹ï¼š</text>
					<view class="formula-examples">
						<view class="formula-item">
							<text class="formula-label">$E = mc^2$ï¼š</text>
							<uni-ai-math-renderer text="E = mc^2" :displayMode="false"></uni-ai-math-renderer>
						</view>
						<view class="formula-item">
							<text class="formula-label">\\(\\frac{a}{b}\\)ï¼š</text>
							<uni-ai-math-renderer text="\\frac{a}{b}" :displayMode="false"></uni-ai-math-renderer>
						</view>
					</view>
				</view>
				
				<view class="demo-section">
					<text class="demo-section-title">å—çº§å…¬å¼ç¤ºä¾‹ï¼š</text>
					<view class="formula-examples">
						<view class="formula-item">
							<text class="formula-label">$$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$ï¼š</text>
							<uni-ai-math-renderer text="\\int_{-\\infty}^{\\infty} e^{-x^2} dx = \\sqrt{\\pi}" :displayMode="true"></uni-ai-math-renderer>
						</view>
						<view class="formula-item">
							<text class="formula-label">\\[\\sum_{i=1}^{n} x_i\\]ï¼š</text>
							<uni-ai-math-renderer text="\\sum_{i=1}^{n} x_i" :displayMode="true"></uni-ai-math-renderer>
						</view>
					</view>
				</view>
			</view>
		</view>

			<!-- æµ‹è¯•ç”¨ä¾‹ç»“æœ -->
			<view class="test-cases-results">
				<text class="info-title">æµ‹è¯•ç”¨ä¾‹ç»“æœï¼š</text>
				<view class="results-content">
					<view 
						v-for="(result, index) in testResults" 
						:key="index"
						:class="['test-result', `result-${result.status}`]"
					>
						<view class="result-header">
							<text class="result-index">æµ‹è¯•ç”¨ä¾‹ {{ index + 1 }}</text>
							<text class="result-status">{{ getStatusText(result.status) }}</text>
						</view>
						<view class="result-content">
							<text class="test-case-text">{{ result.testCase }}</text>
							<view v-if="result.matches && result.matches.length > 0" class="matches">
								<text class="matches-title">åŒ¹é…ç»“æœï¼š</text>
								<view 
									v-for="(match, matchIndex) in result.matches" 
									:key="matchIndex"
									class="match-item"
								>
									<text class="match-type">{{ match.type }}</text>
									<text class="match-content">{{ match.content }}</text>
									
									<!-- æ•°å­¦å…¬å¼æ¸²æŸ“ -->
									<view v-if="match.details && (match.details.mathType || match.details.display)" class="math-renderer">
										<text class="renderer-title">æ¸²æŸ“æ•ˆæœï¼š</text>
										<view class="formula-display">
											<uni-ai-math-renderer 
												:formula="match.details.text"
												:display="match.details.display || match.details.displayMode"
												:size="match.details.display || match.details.displayMode ? 'large' : 'medium'"
											></uni-ai-math-renderer>
										</view>
									</view>
								</view>
							</view>
							<view v-if="result.error" class="error-info">
								<text class="error-text">é”™è¯¯ï¼š{{ result.error }}</text>
							</view>
						</view>
					</view>
				</view>
			</view>

			<!-- æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•ç»“æœ -->
			<view class="regex-test-results">
				<text class="info-title">æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•ç»“æœï¼š</text>
				<view class="regex-content">
					<view class="regex-pattern">
						<text class="pattern-title">è¡Œå†…å…¬å¼ $...$ï¼š</text>
						<text class="pattern-regex">/^\$([^\$\n]+?)\$/</text>
						<text class="pattern-count">åŒ¹é… {{ dollarMatchCount }} ä¸ª</text>
					</view>
					<view class="regex-pattern">
						<text class="pattern-title">è¡Œå†…å…¬å¼ \\(...\\)ï¼š</text>
						<text class="pattern-regex">/^\\\\(([^\\\\]*?)\\\\)/</text>
						<text class="pattern-count">åŒ¹é… {{ parenMatchCount }} ä¸ª</text>
					</view>
					<view class="regex-pattern">
						<text class="pattern-title">å—çº§å…¬å¼ $$...$$ï¼š</text>
						<text class="pattern-regex">/^(\\${2,})\\n?([\\s\\S]*?)\\n?\\1(?:\n|$)/</text>
						<text class="pattern-count">åŒ¹é… {{ doubleDollarMatchCount }} ä¸ª</text>
					</view>
					<view class="regex-pattern">
						<text class="pattern-title">å—çº§å…¬å¼ \\[...\\]ï¼š</text>
						<text class="pattern-regex">/^\\\\\\[([\\s\\S]*?)\\\\\\](?:\n|$)/</text>
						<text class="pattern-count">åŒ¹é… {{ bracketMatchCount }} ä¸ª</text>
					</view>
					<view class="regex-pattern">
						<text class="pattern-title">GPT é£æ ¼å…¬å¼ï¼š</text>
						<text class="pattern-regex">($...$), (\\(...\\)), (\[...\]), (\\[...\\])</text>
						<text class="pattern-count">æ”¯æŒ</text>
					</view>
				</view>
			</view>

			<!-- ç»Ÿè®¡ä¿¡æ¯ -->
			<view class="test-stats">
				<text class="info-title">æµ‹è¯•ç»Ÿè®¡ï¼š</text>
				<view class="stats-content">
					<view class="stat-item">
						<text class="stat-label">æ€»æµ‹è¯•ç”¨ä¾‹ï¼š</text>
						<text class="stat-value">{{ testCases.length }}</text>
					</view>
					<view class="stat-item">
						<text class="stat-label">æˆåŠŸåŒ¹é…ï¼š</text>
						<text class="stat-value">{{ successCount }}</text>
					</view>
					<view class="stat-item">
						<text class="stat-label">åŒ¹é…å¤±è´¥ï¼š</text>
						<text class="stat-value">{{ failureCount }}</text>
					</view>
					<view class="stat-item">
						<text class="stat-label">è§£æé”™è¯¯ï¼š</text>
						<text class="stat-value">{{ errorCount }}</text>
					</view>
					<view class="stat-item">
						<text class="stat-label">æµ‹è¯•è€—æ—¶ï¼š</text>
						<text class="stat-value">{{ testTime }}ms</text>
					</view>
				</view>
			</view>
		</view>
	</view>
</template>

<script lang="uts" setup>
	import { ref, computed, onMounted } from 'vue'
	import markedKatexExtension from '@/uni_modules/uni-ai-x/sdk/marked-katex-extension.uts'

	// æµ‹è¯•ç”¨ä¾‹
	const testCases = [
		// è¡Œå†…å…¬å¼æµ‹è¯•
		'$E = mc^2$',
		'\\(\\frac{a}{b} + \\frac{c}{d}\\)',
		'$x^2 + y^2 = z^2$',
		'\\(\\sqrt{x^2 + y^2}\\)',
		
		// å—çº§å…¬å¼æµ‹è¯•
		'$$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$',
		'\\[\\sum_{i=1}^{n} x_i = x_1 + x_2 + \\cdots + x_n\\]',
		'$$\frac{d}{dx} x^n = nx^{n-1}$$',
		'\\[\\lim_{x \\to 0} \\frac{\\sin x}{x} = 1\\]',
		
		// æ··åˆå†…å®¹æµ‹è¯•
		'è¿™æ˜¯ä¸€ä¸ªè¡Œå†…å…¬å¼ï¼š$E = mc^2$ å’Œå—çº§å…¬å¼ï¼š$$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$',
		'ä½¿ç”¨ \\( \\) è¯­æ³•çš„è¡Œå†…å…¬å¼ï¼š\\(\\frac{a}{b} + \\frac{c}{d}\\)',
		'ä½¿ç”¨ \\[ \\] è¯­æ³•çš„å—çº§å…¬å¼ï¼š\\[\\sum_{i=1}^{n} x_i\\]',

        `æˆ‘æ¥ä¸ºæ‚¨æä¾›ä¸€äº›å¸¸è§çš„æ•°å­¦å…¬å¼ç¤ºä¾‹ï¼Œå¹¶å±•ç¤ºå¦‚ä½•ç”¨æˆ‘çš„åŠŸèƒ½æ¥å¤„ç†ç›¸å…³çš„æ•°å­¦æ•°æ®ï¼š
## åŸºç¡€æ•°å­¦å…¬å¼ç¤ºä¾‹

### 1. ä»£æ•°å…¬å¼
- **äºŒæ¬¡æ–¹ç¨‹æ±‚æ ¹å…¬å¼**: $x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$
- **å‹¾è‚¡å®šç†**: $a^2 + b^2 = c^2$
- **äºŒé¡¹å¼å®šç†**: $(a + b)^n = \sum_{k=0}^{n} \binom{n}{k} a^{n-k} b^k$

å¦‚æœæ‚¨éœ€è¦ç‰¹å®šæ•°å­¦å…¬å¼çš„å¯è§†åŒ–æˆ–æ•°æ®åˆ†æï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“éœ€æ±‚ï¼`
	]

	// æµ‹è¯•çŠ¶æ€
	const showDetails = ref<boolean>(true)
	const autoRun = ref<boolean>(true)
	const testResults = ref<any[]>([])
	const testTime = ref<number>(0)

	// æ‰©å±•ä¿¡æ¯
	const extensions = ref<any[]>([])
	const extensionCount = computed(() => extensions.value.length)
	const extensionNames = computed(() => extensions.value.map(ext => ext.name))

	// æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è®¡æ•°
	const dollarMatchCount = ref<number>(0)
	const parenMatchCount = ref<number>(0)
	const doubleDollarMatchCount = ref<number>(0)
	const bracketMatchCount = ref<number>(0)

	// ç»Ÿè®¡ä¿¡æ¯
	const successCount = computed(() => testResults.value.filter(r => r.status === 'success').length)
	const failureCount = computed(() => testResults.value.filter(r => r.status === 'failure').length)
	const errorCount = computed(() => testResults.value.filter(r => r.status === 'error').length)

	// è·å–çŠ¶æ€æ–‡æœ¬
	const getStatusText = (status: string): string => {
		const statusMap: Record<string, string> = {
			'success': 'âœ… æˆåŠŸ',
			'failure': 'âŒ å¤±è´¥',
			'error': 'âš ï¸ é”™è¯¯'
		}
		return statusMap[status] || 'æœªçŸ¥'
	}

	// è¿è¡Œæ‰€æœ‰æµ‹è¯•
	const runAllTests = () => {
		const startTime = Date.now()
		testResults.value = []
		
		// è·å–æ‰©å±•
		try {
			const katexExtension = markedKatexExtension()
			extensions.value = katexExtension.extensions
			console.log('âœ… æˆåŠŸåŠ è½½ marked-katex-extension')
			console.log('æ‰©å±•æ•°é‡:', extensions.value.length)
			console.log('æ‰©å±•åç§°:', extensions.value.map(ext => ext.name))
		} catch (error) {
			console.error('âŒ åŠ è½½ marked-katex-extension å¤±è´¥:', error)
			extensions.value = []
		}
		
		// é‡ç½®æ­£åˆ™è¡¨è¾¾å¼è®¡æ•°
		dollarMatchCount.value = 0
		parenMatchCount.value = 0
		doubleDollarMatchCount.value = 0
		bracketMatchCount.value = 0
		
		// æµ‹è¯•æ¯ä¸ªæ‰©å±•
		extensions.value.forEach((extension, extIndex) => {
			console.log(`\n--- æµ‹è¯•æ‰©å±• ${extIndex + 1}: ${extension.name} ---`)
			console.log('æ‰©å±•çº§åˆ«:', extension.level)
			console.log('æ‰©å±•ä¼˜å…ˆçº§:', extension.priority)
			
			testCases.forEach((testCase, index) => {
				console.log(`\næµ‹è¯•ç”¨ä¾‹ ${index + 1}: "${testCase}"`)
				
				// æ¨¡æ‹Ÿ lexer å’Œ tokens å‚æ•°
				const mockLexer = {
					_instance: () => mockLexer
				}
				const mockTokens: any[] = []
				
				const result: any = {
					testCase,
					extension: extension.name,
					status: 'failure',
					matches: [],
					error: null
				}
				
				try {
					// å…ˆå°è¯• start æ–¹æ³•
					let startResult: number | undefined = undefined
					if (extension.start) {
						startResult = extension.start(mockLexer, testCase, mockTokens)
						console.log('start æ–¹æ³•ç»“æœ:', startResult)
					}
					
					// ç„¶åå°è¯• tokenizer æ–¹æ³•
					let tokenResult = null
					if (extension.tokenizer) {
						tokenResult = extension.tokenizer(mockLexer, testCase, mockTokens)
						console.log('tokenizer æ–¹æ³•ç»“æœ:', tokenResult)
					}
					
					if (tokenResult) {
						result.status = 'success'
						result.matches.push({
							type: tokenResult.type,
							content: tokenResult.raw,
							details: {
								text: tokenResult.text,
								display: (tokenResult as any).display,
								displayMode: (tokenResult as any).displayMode,
								mathType: (tokenResult as any).mathType
							}
						})
						console.log('âœ… åŒ¹é…æˆåŠŸ:', {
							type: tokenResult.type,
							raw: tokenResult.raw,
							text: tokenResult.text,
							display: (tokenResult as any).display,
							displayMode: (tokenResult as any).displayMode,
							mathType: (tokenResult as any).mathType
						})
					} else if (startResult !== undefined) {
						// å¦‚æœ start æ–¹æ³•è¿”å›äº†ä½ç½®ï¼Œè¯´æ˜å¯èƒ½åŒ¹é…
						result.status = 'success'
						result.matches.push({
							type: 'potential_match',
							content: `ä½ç½® ${startResult}`,
							details: {
								startPosition: startResult,
								method: 'start'
							}
						})
						console.log('âœ… start æ–¹æ³•è¿”å›ä½ç½®:', startResult)
					} else {
						console.log('âŒ æœªåŒ¹é…')
					}
				} catch (error) {
					result.status = 'error'
					result.error = String(error)
					console.log('âŒ è§£æé”™è¯¯:', error)
				}
				
				testResults.value.push(result)
			})
		})
		
		// æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼
		testRegexPatterns()
		
		testTime.value = Date.now() - startTime
		console.log('\n=== æµ‹è¯•å®Œæˆ ===')
	}

	// ä»…æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼
	const testRegexOnly = () => {
		testRegexPatterns()
	}

	// æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼
	const testRegexPatterns = () => {
		// è¡Œå†…å…¬å¼æ­£åˆ™è¡¨è¾¾å¼ - åŒ¹é… marked-katex-extension ä¸­çš„æ¨¡å¼
		const inlineDollarPattern = /^\$([^\$\n]+?)\$/
		const inlineParenPattern = /^\\\(([^\\]*?)\\\)/

		// å—çº§å…¬å¼æ­£åˆ™è¡¨è¾¾å¼ - åŒ¹é… marked-katex-extension ä¸­çš„æ¨¡å¼
		const blockDollarPattern = /^(\${2,})\n?([\s\S]*?)\n?\1(?:\n|$)/
		const blockBracketPattern = /^\\\[([\s\S]*?)\\\](?:\n|$)/

		// é‡ç½®è®¡æ•°
		dollarMatchCount.value = 0
		parenMatchCount.value = 0
		doubleDollarMatchCount.value = 0
		bracketMatchCount.value = 0

		testCases.forEach((testCase, index) => {
			console.log(`\næµ‹è¯•ç”¨ä¾‹ ${index + 1}: "${testCase}"`)
			
			// æµ‹è¯•è¡Œå†…å…¬å¼æ­£åˆ™è¡¨è¾¾å¼
			const dollarMatch = inlineDollarPattern.exec(testCase)
			if (dollarMatch) {
				dollarMatchCount.value++
				console.log('âœ… $...$ åŒ¹é…:', dollarMatch[0])
			}
			
			const parenMatch = inlineParenPattern.exec(testCase)
			if (parenMatch) {
				parenMatchCount.value++
				console.log('âœ… \\(...\\) åŒ¹é…:', parenMatch[0])
			}
			
			// æµ‹è¯•å—çº§å…¬å¼æ­£åˆ™è¡¨è¾¾å¼
			const doubleDollarMatch = blockDollarPattern.exec(testCase)
			if (doubleDollarMatch) {
				doubleDollarMatchCount.value++
				console.log('âœ… $$...$$ åŒ¹é…:', doubleDollarMatch[0])
			}
			
			const bracketMatch = blockBracketPattern.exec(testCase)
			if (bracketMatch) {
				bracketMatchCount.value++
				console.log('âœ… \\[...\\] åŒ¹é…:', bracketMatch[0])
			}
			
			// æµ‹è¯• GPT é£æ ¼å…¬å¼ï¼ˆå¸¦æ‹¬å·åŒ…è£…ï¼‰
			if (testCase.includes('($') || testCase.includes('(\\(') || testCase.includes('(\[') || testCase.includes('(\\[')) {
				console.log('ğŸ” æ£€æµ‹åˆ° GPT é£æ ¼å…¬å¼:', testCase)
			}
			
			if (!dollarMatch && !parenMatch && !doubleDollarMatch && !bracketMatch) {
				console.log('âŒ æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼éƒ½æœªåŒ¹é…')
			}
		})
	}

	// æ¸…ç©ºç»“æœ
	const clearResults = () => {
		testResults.value = []
		testTime.value = 0
		dollarMatchCount.value = 0
		parenMatchCount.value = 0
		doubleDollarMatchCount.value = 0
		bracketMatchCount.value = 0
	}

	// è®¾ç½®å˜åŒ–å¤„ç†
	const onShowDetailsChange = (e: any) => {
		showDetails.value = e.detail.value
	}

	const onAutoRunChange = (e: any) => {
		autoRun.value = e.detail.value
	}

	// ç»„ä»¶æŒ‚è½½åè‡ªåŠ¨è¿è¡Œæµ‹è¯•
	onMounted(() => {
		if (autoRun.value) {
			setTimeout(() => {
				runAllTests()
			}, 500)
		}
	})
</script>

<style lang="scss">
	.math-extension-test {
		padding: 32rpx;
		background-color: #f5f5f5;
		min-height: 100vh;

		.page-header {
			text-align: center;
			margin-bottom: 48rpx;
			padding: 32rpx;
			background-color: #ffffff;
			border-radius: 16rpx;
			box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);

			.page-title {
				display: block;
				font-size: 36rpx;
				font-weight: 700;
				color: #333;
				margin-bottom: 16rpx;
			}

			.page-subtitle {
				font-size: 28rpx;
				color: #666;
			}
		}

		.control-panel {
			background-color: #ffffff;
			border-radius: 16rpx;
			padding: 32rpx;
			margin-bottom: 32rpx;
			box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);

			.control-section {
				margin-bottom: 32rpx;

				&:last-child {
					margin-bottom: 0;
				}

				.control-title {
					display: block;
					font-size: 30rpx;
					font-weight: 600;
					color: #333;
					margin-bottom: 24rpx;
				}

				.button-group {
					display: flex;
					flex-wrap: wrap;
					gap: 16rpx;

					.test-button {
						padding: 16rpx 24rpx;
						border-radius: 8rpx;
						border: 2rpx solid #e0e0e0;
						background-color: #1890ff;
						color: #ffffff;
						font-size: 26rpx;
						transition: all 0.3s ease;

						&:hover {
							background-color: #096dd9;
							border-color: #096dd9;
						}
					}
				}

				.setting-group {
					.setting-item {
						display: flex;
						align-items: center;
						justify-content: space-between;
						margin-bottom: 24rpx;

						&:last-child {
							margin-bottom: 0;
						}

						.setting-label {
							font-size: 26rpx;
							color: #666;
						}
					}
				}
			}
		}

		.test-results {
			background-color: #ffffff;
			border-radius: 16rpx;
			padding: 32rpx;
			box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);

			.section-title {
				display: block;
				font-size: 32rpx;
				font-weight: 700;
				color: #333;
				margin-bottom: 32rpx;
				text-align: center;
			}

			.extension-info,
			.test-cases-results,
			.regex-test-results,
			.test-stats {
				margin-bottom: 48rpx;

				&:last-child {
					margin-bottom: 0;
				}

				.info-title {
					display: block;
					font-size: 28rpx;
					font-weight: 600;
					color: #333;
					margin-bottom: 24rpx;
					padding: 16rpx;
					background-color: #f0f8ff;
					border-radius: 8rpx;
					border-left: 6rpx solid #1890ff;
				}
			}

			.extension-info {
				.info-content {
					.info-item {
						display: flex;
						justify-content: space-between;
						align-items: center;
						padding: 20rpx 0;
						border-bottom: 2rpx solid #f0f0f0;

						&:last-child {
							border-bottom: none;
						}

						.info-label {
							font-size: 26rpx;
							color: #666;
						}

						.info-value {
							font-size: 26rpx;
							font-weight: 600;
							color: #333;
						}
					}
				}
			}

			.math-renderer-demo {
				.demo-content {
					.demo-section {
						margin-bottom: 32rpx;

						&:last-child {
							margin-bottom: 0;
						}

						.demo-section-title {
							font-size: 28rpx;
							font-weight: 600;
							color: #333;
							margin-bottom: 20rpx;
							padding: 16rpx;
							background-color: #f0f8ff;
							border-radius: 8rpx;
							border-left: 6rpx solid #1890ff;
						}

						.formula-examples {
							.formula-item {
								display: flex;
								align-items: center;
								margin-bottom: 20rpx;
								padding: 16rpx;
								background-color: #f8f9fa;
								border-radius: 8rpx;
								border: 2rpx solid #e9ecef;

								&:last-child {
									margin-bottom: 0;
								}

								.formula-label {
									font-size: 24rpx;
									color: #666;
									margin-right: 16rpx;
									min-width: 150rpx;
									text-align: right;
								}
							}
						}
					}
				}
					}

		.math-renderer-demo {
			.demo-content {
				.demo-section {
					margin-bottom: 32rpx;

					&:last-child {
						margin-bottom: 0;
					}

					.demo-section-title {
						font-size: 28rpx;
						font-weight: 600;
						color: #333;
						margin-bottom: 20rpx;
						padding: 16rpx;
						background-color: #f0f8ff;
						border-radius: 8rpx;
						border-left: 6rpx solid #1890ff;
					}

					.formula-examples {
						.formula-item {
							display: flex;
							align-items: center;
							margin-bottom: 20rpx;
							padding: 16rpx;
							background-color: #f8f9fa;
							border-radius: 8rpx;
							border: 2rpx solid #e9ecef;

							&:last-child {
								margin-bottom: 0;
							}

							.formula-label {
								font-size: 24rpx;
								color: #666;
								margin-right: 16rpx;
								min-width: 150rpx;
								text-align: right;
							}
						}
					}
				}
			}
		}

		.test-cases-results {
				.results-content {
					.test-result {
						margin-bottom: 24rpx;
						padding: 20rpx;
						border-radius: 8rpx;
						border: 2rpx solid #f0f0f0;

						&:last-child {
							margin-bottom: 0;
						}

						&.result-success {
							background-color: #f6ffed;
							border-color: #b7eb8f;
						}

						&.result-failure {
							background-color: #fff2f0;
							border-color: #ffccc7;
						}

						&.result-error {
							background-color: #fff7e6;
							border-color: #ffd591;
						}

						.result-header {
							display: flex;
							justify-content: space-between;
							align-items: center;
							margin-bottom: 16rpx;

							.result-index {
								font-size: 26rpx;
								font-weight: 600;
								color: #333;
							}

							.result-status {
								font-size: 24rpx;
								font-weight: 500;
							}
						}

						.result-content {
							.test-case-text {
								display: block;
								font-size: 24rpx;
								color: #666;
								margin-bottom: 16rpx;
								padding: 12rpx;
								background-color: #f8f9fa;
								border-radius: 6rpx;
								font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
							}

							.matches {
								margin-bottom: 16rpx;

								.matches-title {
									display: block;
									font-size: 24rpx;
									font-weight: 500;
									color: #333;
									margin-bottom: 12rpx;
								}

								.match-item {
									display: flex;
									align-items: center;
									margin-bottom: 8rpx;

									&:last-child {
										margin-bottom: 0;
									}

									.match-type {
										font-size: 22rpx;
										color: #1890ff;
										background-color: #e6f7ff;
										padding: 4rpx 12rpx;
										border-radius: 4rpx;
										margin-right: 16rpx;
										min-width: 80rpx;
										text-align: center;
									}

									.match-content {
										font-size: 24rpx;
										color: #495057;
										font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
									}
								}

								/* æ•°å­¦å…¬å¼æ¸²æŸ“æ ·å¼ */
								.math-renderer {
									margin-top: 12rpx;
									padding: 12rpx;
									background-color: #f0f8ff;
									border-radius: 6rpx;
									border: 2rpx solid #e6f7ff;

									.renderer-title {
										font-size: 22rpx;
										color: #333;
										margin-bottom: 8rpx;
										font-weight: 600;
									}

									.formula-display {
										background-color: #ffffff;
										border-radius: 4rpx;
										padding: 8rpx;
										text-align: center;
									}
								}
							}

							.error-info {
								.error-text {
									font-size: 24rpx;
									color: #cf1322;
									background-color: #fff2f0;
									padding: 12rpx;
									border-radius: 6rpx;
									border: 2rpx solid #ffccc7;
								}
							}
						}
					}
				}
			}

			.regex-test-results {
				.regex-content {
					.regex-pattern {
						display: flex;
						align-items: center;
						margin-bottom: 20rpx;
						padding: 16rpx;
						background-color: #f8f9fa;
						border-radius: 8rpx;
						border: 2rpx solid #e9ecef;

						&:last-child {
							margin-bottom: 0;
						}

						.pattern-title {
							font-size: 24rpx;
							color: #333;
							min-width: 200rpx;
							margin-right: 16rpx;
						}

						.pattern-regex {
							font-size: 20rpx;
							color: #666;
							font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
							flex: 1;
							margin-right: 16rpx;
							word-break: break-all;
						}

						.pattern-count {
							font-size: 24rpx;
							color: #1890ff;
							font-weight: 600;
							min-width: 80rpx;
							text-align: center;
						}
					}
				}
			}

			.test-stats {
				.stats-content {
					.stat-item {
						display: flex;
						justify-content: space-between;
						align-items: center;
						padding: 20rpx 0;
						border-bottom: 2rpx solid #f0f0f0;

						&:last-child {
							border-bottom: none;
						}

						.stat-label {
							font-size: 26rpx;
							color: #666;
						}

						.stat-value {
							font-size: 26rpx;
							font-weight: 600;
							color: #333;
						}
					}
				}
			}
		}

		// å“åº”å¼è®¾è®¡
		@media (max-width: 750rpx) {
			padding: 24rpx;

			.page-header {
				padding: 24rpx;
				margin-bottom: 32rpx;

				.page-title {
					font-size: 32rpx;
				}

				.page-subtitle {
					font-size: 26rpx;
				}
			}

			.control-panel,
			.test-results {
				padding: 24rpx;
				margin-bottom: 24rpx;
			}

			.button-group {
				flex-direction: column;
				align-items: stretch;
			}

			.regex-pattern {
				flex-direction: column;
				align-items: flex-start;

				.pattern-title,
				.pattern-regex,
				.pattern-count {
					margin-right: 0;
					margin-bottom: 8rpx;
					min-width: auto;
				}
			}
		}
	}
</style>
